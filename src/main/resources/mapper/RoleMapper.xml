<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.study.myshop.repository.RoleMapper">

    <resultMap id="role" type="com.study.myshop.po.RolePO">
        <id property="roleId" column="role_id"  />
        <result property="roleName" column="role_name"/>
    </resultMap>




    <select id="selectRolePoListByAdminId" resultMap="role">
        SELECT r.* FROM role r
        INNER JOIN admin_role ar ON ar.role_id = r.role_id
        WHERE ar.admin_id = #{adminId}
    </select>

    <select id="selectRoleListByOperateUrl" resultMap="role">
        select r.*  FROM operate o
                             INNER JOIN permission_operate po ON po.operate_id = o.operate_id
                             INNER JOIN permission p ON p.permission_id = po.operate_id
                             INNER JOIN role_permission rp ON rp.permission_id = p.permission_id
                             INNER JOIN role r on r.role_id = rp.role_id
        WHERE o.operate_url=#{operateUrl}
    </select>



    <delete id="deleteRoleByAdminId">
        delete from admin_role where admin_id = #{adminId}
    </delete>


    <select id="selectRoleList" resultMap="role">
        select * from role;
    </select>

</mapper>